<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Comparative Glucose Response by Nutrient Focus and Health Group</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="stylesheet" href="style.css">
    <link rel="icon" href="data:,">
</head>
<body>
    <div id="loading" style="display: flex; flex-direction: column; align-items: center; justify-content: center; height: 80vh;">
        <div class="spinner"></div>
        <div style="margin-top: 18px; font-size: 18px; color: #2d3748;">Loading data, please wait...</div>
    </div>
    <div class="container" style="display:none;">
        <h1 style="text-align: center; font-size: 28px; font-weight: bold; margin-bottom: 20px;">
            Comparative Glucose Response by Nutrient Focus and Health Group
        </h1>
        <p style="font-size: 16px; color: #4a5568; margin-bottom: 20px; text-align: center;">
            <b>Research Question:</b> How do different types of meals affect blood sugar levels in people with different health conditions?
        </p>
        <div id="controls">
            <label>Nutrient Focus:</label>
            <select id="nutrientFocus">
                <option>High-Carb</option>
                <option>High-Protein</option>
                <option>High-Fat</option>
            </select>
            <label style="margin-right: 8px;">Health Group:</label>
            <div id="healthGroupCheckboxes" style="display: flex; gap: 18px; align-items: center;">
                <label class="health-checkbox-label" style="display: flex; align-items: center; gap: 6px;">
                    <input type="checkbox" class="health-checkbox" value="Healthy" checked>
                    <span class="custom-checkbox"></span>
                    Healthy
                </label>
                <label class="health-checkbox-label" style="display: flex; align-items: center; gap: 6px;">
                    <input type="checkbox" class="health-checkbox" value="Pre-diabetic" checked>
                    <span class="custom-checkbox"></span>
                    Pre-diabetic
                </label>
                <label class="health-checkbox-label" style="display: flex; align-items: center; gap: 6px;">
                    <input type="checkbox" class="health-checkbox" value="Type 2 Diabetic" checked>
                    <span class="custom-checkbox"></span>
                    Type 2 Diabetic
                </label>
            </div>
        </div>
        <div class="charts-row">
            <div class="chart-container" id="lineChartContainer">
                <p class="desc"><b>Glucose Response Over Time:</b> This line chart shows the average blood glucose response (y-axis) at each minute after a meal (x-axis), for the selected nutrient focus and health group.</p>
                <div id="lineChart"></div>
            </div>
            <div class="chart-container" id="donutChartContainer">
                <p class="desc"><b>Average Meal Nutrients:</b> The donut chart displays the average grams of Carbs, Protein, and Fat per meal, plus the calculated average calories, for the current selection.</p>
                <div id="donutChart"></div>
            </div>
        </div>
        <details class="dataset-overview">
            <summary>Data</summary>
            <div class="overview-content">
              <p>
                <b>Dataset Overview:</b> The CGMacros dataset provides multimodal information from continuous glucose monitors (CGM), food macronutrients, food photographs, and physical activity, along with anonymized participant demographics, anthropometric measurements, and health parameters. It includes data from 45 participants (15 healthy, 16 pre-diabetic, and 14 with Type 2 diabetes) who consumed meals with varying macronutrient compositions over ten days. This dataset is a valuable resource for advancing research in personalized nutrition and automated diet monitoring.
              </p>
            </div>
        </details>
        <details class="dataset-overview">
            <summary>Rationale</summary>
            <div class="overview-content">
              <p>
                Our visualizations explore the question: How do different types of meals affect blood sugar levels in people with different health conditions? Using the CGMacros dataset, we aimed to investigate whether the macronutrient composition of meals (categorized as High-Carb, High-Protein, or High-Fat) influenced post-meal glucose response. Understanding these effects can help inform dietary recommendations tailored to individual health needs. To visualize this relationship, we designed an interactive dashboard focused on clarity, comparability, and easy interactiveness. Our primary chart, “Glucose Response Over Time,” is a line chart that displays the average blood glucose level at each minute after a meal, allowing viewers to compare responses across selected health groups and nutrient focuses. We chose a line chart for its ability to show temporal trends and to enable direct visual comparisons between groups. For color encoding, we used D3's default but intuitive palette—blue (Healthy), orange (Pre-diabetic), and green (Type 2 Diabetic)—because it is visually distinct, colorblind-friendly, and avoids introducing bias. To complement the line chart, we added a donut chart titled “Average Meal Nutrients,” which shows the average intake of carbs, protein, and fat, as well as calculated average calories for the selected combination. This chart contextualizes the glucose response by illustrating the underlying macronutrient distribution. For color encoding, we used another user-friendly palette where it was mint-green (carbs), light-blue (protein), and light-orange (fat), although there was no real decision made towards what colors to use, as this was another default palette. We considered alternatives instead of the donut chart, such as bar charts, but found the donut chart better emphasized proportion and fit the dietary theme more effectively. Our interface allows viewers to explore combinations of nutrient focus and health group via a dropdown menu and checkboxes, respectively. To maintain a smooth user experience, we implemented transitions between selections, enabling both charts to update fluidly and helping viewers visually track changes. We also enforced that at least one health group must be selected to avoid empty plots. Additional design details, like gridlines in the line chart, were included to support accurate reading of values. We also implemented a “Loading data...please wait” screen when the page loads or refreshes, since the dataset is relatively large. This sets viewer expectations appropriately and prevents confusion about whether the site is working. Our development process was a collaborative effort between three people, which took approximately 15 person-hours in total. This included brainstorming, parsing, and cleaning the dataset using D3.js, classifying meals by dominant macronutrient, computing the glucose averages per minute per group, building both visualizations with animations and interactivity, styling the layout, and performing debugging and any final polishing. The most time-intensive part of the project was preparing and transforming the data to be compatible with our D3-based visualizations. 
            </p>
            </div>
        </details>
    </div>
    <script src="script.js"></script>
</body>
</html>